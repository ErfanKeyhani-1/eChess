#include "board.h"
#include "movegen.h"
#include "move.h"
#include "attacks.h"
#include <stdio.h>
#include <stdlib.h>

int main() {
    //РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ
    //          INIT BLOCK
    //РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ

    printf("            РќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕ  РќѕРќѕРќѕРќѕРќѕ                              \n");
    printf("           РќѕРќѕРќѕРќЉРќЉРќЉРќЉРќЉРќѕРќѕРќѕРќЉРќЉРќѕРќѕРќѕ                               \n");
    printf("  РќѕРќѕРќѕРќѕРќѕРќѕ  РќѕРќѕРќѕ     РќЉРќЉРќЉ  РќЉРќѕРќѕРќѕРќѕРќѕРќѕРќѕ    РќѕРќѕРќѕРќѕРќѕРќѕ   РќѕРќѕРќѕРќѕРќѕ   РќѕРќѕРќѕРќѕРќѕ \n");
    printf(" РќѕРќѕРќѕРќЉРќЉРќѕРќѕРќѕРќЉРќѕРќѕРќѕ          РќЉРќѕРќѕРќѕРќЉРќЉРќѕРќѕРќѕ  РќѕРќѕРќѕРќЉРќЉРќѕРќѕРќѕ РќѕРќѕРќѕРќЉРќЉ   РќѕРќѕРќѕРќЉРќЉ  \n");
    printf("РќЉРќѕРќѕРќѕРќѕРќѕРќѕРќѕ РќЉРќѕРќѕРќѕ          РќЉРќѕРќѕРќѕ РќЉРќѕРќѕРќѕ РќЉРќѕРќѕРќѕРќѕРќѕРќѕРќѕ РќЉРќЉРќѕРќѕРќѕРќѕРќѕ РќЉРќЉРќѕРќѕРќѕРќѕРќѕ \n");
    printf("РќЉРќѕРќѕРќѕРќЉРќЉРќЉ  РќЉРќЉРќѕРќѕРќѕ     РќѕРќѕРќѕ РќЉРќѕРќѕРќѕ РќЉРќѕРќѕРќѕ РќЉРќѕРќѕРќѕРќЉРќЉРќЉ   РќЉРќЉРќЉРќЉРќѕРќѕРќѕ РќЉРќЉРќЉРќЉРќѕРќѕРќѕ\n");
    printf("РќЉРќЉРќѕРќѕРќѕРќѕРќѕРќѕ  РќЉРќЉРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕ  РќѕРќѕРќѕРќѕ РќѕРќѕРќѕРќѕРќѕРќЉРќЉРќѕРќѕРќѕРќѕРќѕРќѕ  РќѕРќѕРќѕРќѕРќѕРќѕ  РќѕРќѕРќѕРќѕРќѕРќѕ \n");
    printf(" РќЉРќЉРќЉРќЉРќЉРќЉ    РќЉРќЉРќЉРќЉРќЉРќЉРќЉРќЉРќЉ  РќЉРќЉРќЉРќЉ РќЉРќЉРќЉРќЉРќЉ  РќЉРќЉРќЉРќЉРќЉРќЉ  РќЉРќЉРќЉРќЉРќЉРќЉ  РќЉРќЉРќЉРќЉРќЉРќЉ  \n");
    printf("\n");
    printf("eChess Booted. Ready to Clap Stockfish's cheeks.\n\n");

    //РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ
    //         FEN LOAD
    //РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ
    printf("РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ\n");
    printf("Рћѓ           ­ЪЊЦ LOADING FEN STRING          Рћѓ\n");
    printf("РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў\n");
    load_fen("r2qkb1r/5p2/1pnp4/pbp1Bnp1/3P2p1/4NN2/PPPBPPP1/R2QK2R");
    if (!validate_kings()) {
        exit(1);
    }
    printf("[+] Done\n");

    //РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ
    //          BOARD RENDER
    //РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ
    printf("РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ\n");
    printf("Рћѓ             РЎЪ№ИЈ ASCII BOARD VIEW             Рћѓ\n");
    printf("РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў\n");
    print_board();
    printf("[+] Done.\n\n");

    //РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ
    //         INIT TABLES
    //РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ
    printf("РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ\n");
    printf("Рћѓ      ­ЪЊі Initializing Attack Tables       Рћѓ\n");
    printf("РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў\n");
    init_attack_tables();
    printf("[+] Done\n");

    //РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ
    //        PAWN MOVEGEN
    //РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ
    Move moves[256];
    int move_count = 0;
    printf("РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ\n");
    printf("Рћѓ           ­ЪДа WHITE PAWN MOVES            Рћѓ\n");
    printf("РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў\n");
    print_bitboard(generate_pawn_pushes_white());

    printf("РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ\n");
    printf("Рћѓ           ­ЪДа BLACK PAWN MOVES            Рћѓ\n");
    printf("РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў\n");
    print_bitboard(generate_pawn_pushes_black());

    printf("РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ\n");
    printf("Рћѓ        Рџћ№ИЈ WHITE PAWN CAPTURES           Рћѓ\n");
    printf("РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў\n");
    print_bitboard(generate_pawn_captures_white());

    printf("РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ\n");
    printf("Рћѓ        Рџћ№ИЈ BLACK PAWN CAPTURES           Рћѓ\n");
    printf("РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў\n");
    print_bitboard(generate_pawn_captures_black());

    generate_white_pawn_moves(moves, &move_count);
    printf("White PAWN moves GENERATED. Move count: %d\n", move_count);
    for (int i = 0; i < move_count; i++) {
        print_move(moves[i]);
    }
    
    //РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ
    //        BLACK PAWN MOVE LIST
    //РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ
    Move black_pawn_moves[256];
    int black_pawn_move_count = 0;

    generate_black_pawn_moves(black_pawn_moves, &black_pawn_move_count);

    printf("РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ\n");
    printf("Рћѓ        ­ЪДа BLACK PAWN MOVES GENERATED      Рћѓ\n");
    printf("РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў\n");
    printf("Move count: %d\n", black_pawn_move_count);

    for (int i = 0; i < black_pawn_move_count; i++) {
        print_move(black_pawn_moves[i]);
    }

    //РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ
    //        KNIGHT MOVEGEN
    //РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ
    Move knight_moves[64];
    int knight_move_count = 0;
    generate_knight_moves_white(knight_moves, &knight_move_count);

    printf("РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ\n");
    printf("Рћѓ        РЎў WHITE KNIGHT MOVES РЎў           Рћѓ\n");
    printf("РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў\n");
    printf("­ЪДа White Knight Moves: %d\n", knight_move_count);
    for (int i = 0; i < knight_move_count; i++) {
        print_move(knight_moves[i]);
    }

    Move black_knight_moves[64];
    int black_knight_move_count = 0;
    generate_black_knight_moves(black_knight_moves, &black_knight_move_count);

    printf("РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ\n");
    printf("Рћѓ        РЎъ BLACK KNIGHT MOVES РЎъ           Рћѓ\n");
    printf("РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў\n");
    printf("­ЪДа Black Knight Moves: %d\n", black_knight_move_count);
    for (int i = 0; i < black_knight_move_count; i++) {
        print_move(black_knight_moves[i]);
    }

    //РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ
    //        WHITE ROOK MOVE LIST
    //РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ
    Move rook_moves[64];
    int rook_move_count = 0;

    generate_rook_moves_white(rook_moves, &rook_move_count);

    printf("РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ\n");
    printf("Рћѓ        РЎќ WHITE ROOK MOVES РЎќ             Рћѓ\n");
    printf("РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў\n");
    printf("­ЪДа White Rook Moves: %d\n", rook_move_count);
    for (int i = 0; i < rook_move_count; i++) {
        print_move(rook_moves[i]);
    }

    //РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ
    //        BLACK ROOK MOVE LIST
    //РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ
    Move black_rook_moves[64];
    int black_rook_move_count = 0;

    generate_rook_moves_black(black_rook_moves, &black_rook_move_count);

    printf("РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ\n");
    printf("Рћѓ        РЎю BLACK ROOK MOVES РЎю             Рћѓ\n");
    printf("РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў\n");
    printf("­ЪДа Black Rook Moves: %d\n", black_rook_move_count);
    for (int i = 0; i < black_rook_move_count; i++) {
        print_move(black_rook_moves[i]);
    }

    //РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ
    //        WHITE BISHOP MOVE LIST
    //РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ
    Move white_bishop_moves[64];
    int white_bishop_move_count = 0;

    generate_bishop_moves_white(white_bishop_moves, &white_bishop_move_count);

    printf("РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ\n");
    printf("Рћѓ        РЎЌ WHITE BISHOP MOVES РЎЌ           Рћѓ\n");
    printf("РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў\n");
    printf("­ЪДа White Bishop Moves: %d\n", white_bishop_move_count);
    for (int i = 0; i < white_bishop_move_count; i++) {
        print_move(white_bishop_moves[i]);
    }

    //РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ
    //        BLACK BISHOP MOVE LIST
    //РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ
    Move black_bishop_moves[64];
    int black_bishop_move_count = 0;

    generate_bishop_moves_black(black_bishop_moves, &black_bishop_move_count);

    printf("РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ\n");
    printf("Рћѓ        РЎЮ BLACK BISHOP MOVES РЎЮ           Рћѓ\n");
    printf("РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў\n");
    printf("­ЪДа Black Bishop Moves: %d\n", black_bishop_move_count);
    for (int i = 0; i < black_bishop_move_count; i++) {
        print_move(black_bishop_moves[i]);
    }


    // TODO: Add queen/king movegen here

    return 0;
}

